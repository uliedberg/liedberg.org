$.webshims.loader.basePath += 'shims/';
$.webshims.polyfill();

$(document).ready(function() {

    var widgetDiv = $('#twitter-widget-ulf');
    setupTewitterWidget();
    $(window).resize(setupTewitterWidget);

    function setupTewitterWidget() {
        setupTewitterWidget.oldSize = setupTewitterWidget.oldSize || {width: 0, height: 0};

        if (widgetDiv.width() != setupTewitterWidget.oldSize.width) {
            /*$('header').append(widgetDiv.width() + 'x' + widgetDiv.height() + ' ' + setupTewitterWidget.oldSize.width + 'x' + setupTewitterWidget.oldSize.height + ', ');*/
            setupTewitterWidget.oldSize = {width: widgetDiv.width(), height: widgetDiv.height()};
            widgetDiv.css('height', '');
            insertTwitterWidget(widgetDiv.width(), widgetDiv.height());
            widgetDiv.css('height', 'auto');
        }
    }
});

// Added id & footer properties to the standard copy n paste from twitter
function insertTwitterWidget(widthInPx, heightInPx) {
    new TWTR.Widget({
      version: 2,
      type: 'profile',
      id: 'twitter-widget-ulf',
      rpp: 4,
      interval: 6000,
      width: widthInPx,
      height: heightInPx,
      footer: '',
      theme: {
        shell: {
          background: 'lightgray',
          color: '#ffffff'
        },
        tweets: {
          background: '#ffffff',
          color: '#000000',
          links: '#eb5707'
        }
      },
      features: {
        scrollbar: false,
        loop: false,
        live: true,
        hashtags: true,
        timestamp: true,
        avatars: false,
        behavior: 'all'
      }
    }).render().setUser('uliedberg').start();
}
